<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <title>phone-home sample</title>
    <script type="text/javascript" src="json2.js"></script>
    <script type="text/javascript" src="phone-home.js"></script>
    <script type="text/javascript">
        PhoneHome.init("http://localhost:8080/", {
                app: "phone-home sample",
                password: "sesame",
                customFields: { "foo": "bar", "baz": "hoge" }
            }        
        );

        function riskyFunction() {
            throw new SyntaxError("fool!");
        }

        function wrapAndSendError() {
            PhoneHome.wrap(riskyFunction);
        }

        function sendMsg() {
            var msgText = document.getElementById('msg').value;
            PhoneHome.sendMessage(msgText);
        }
    </script>
</head>
<body>
    <div>Throw an exception: <button onclick="wrapAndSendError();">Click me!</button></div>
    <div>Send a message: <input id="msg" value="Hello!" /> <button onclick="sendMsg();">Click me!</button></div>
</body>
</html>
